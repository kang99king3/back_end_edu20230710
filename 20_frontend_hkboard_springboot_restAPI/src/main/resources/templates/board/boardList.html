<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
// 	function allSel(bool){
// 		var chks=document.getElementsByName("seq");// [seq,seq,seq,seq..]
// 		for (var i = 0; i < chks.length; i++) {
// 			chks[i].checked=bool;//각각의 체크박스에 체크여부를 true/false로 적용
// 		}
// 	}
	
// 	function isCheck(){
// 		if(confirm("정말 삭제 하시겠습니까?")){
// 			return true;
// 		}
// 		return false;
// 	}
	
	//onload 기능: 페이지가 로딩되면 실행
	$(function(){
		getBoardList();//페이지실행되자마자 바로 글목록 보여주기 실행
	});

	//글목록 조회
	function getBoardList(){
		$.ajax({
			url:'http://localhost:8085/api/board/boardlist',
			method:'get',
			async:false,
			dataType:'json',
			success:function(data){// data는 서버로부터 전달받은 값
				var list=data['list'];//글목록 저장된 객체 받기
// 				alert('길이값:'+list.length);
				
				// $("<table></table>") : 태그생성하는 방법
				var table=$(
						'<h2>글목록</h2>'
						+'<form action="mulDel.do" method="post" onsubmit="return isAllCheck()">'
						+'<table border="1" class="table">'
						+'	<col width="50px" />'
						+'	<col width="50px" />'
						+'	<col width="100px" />'
						+'	<col width="300px" />'
						+'	<col width="200px" />'
						+'	<thead>'
						+'	<tr>'
						+'		<th><input  type="checkbox" name="all" onclick="allSel(this.checked)"> </th>'
						+'		<th>seq</th><th>작성자</th><th>제목</th><th>작성일</th>'
						+'	</tr>'
						+'	</thead>'
						+'	<tbody></tbody>'
						+'	<tfoot>'
						+'	<tr>'
						+'		<td colspan="5">'
						+'			<button type="button" onclick="insertBoardForm()">글추가</button>	'
						+'			<input type="submit" value="삭제"/>	'
						+'		</td>'
						+'	</tr>'
						+'	</tfoot>'
						+'</table>'
						+'</form>');	
				
				//list를 구했고, list를 타켓으로 반복문 실행해서 데이터를 table에 추가
				//table 객체가 준비되어 있음
				$.each(list,function(i,dto){ // i는 인덱스 증가, dto는 list의 값저장
					//tr객체 생성
					var tr=$("<tr></tr>")
					       .append($('<td><input type="checkbox" name="chk" value="'+dto.seq+'"/></td>'))
					       .append($('<td></td>').text(i+1)) //차례대로 번호 부여
					       .append($('<td></td>').text(dto.id)) //아이디
					       .append($('<td></td>')
					    		.html($('<a style="corsor:pointer;" onclick="detail('+dto.seq+')"></a>')
					    				.text(dto.title)))    
						   .append($("<td></td>").text(dto.regdate)); //작성일	
					
				    //생성된 tr객체를 tbody에 추가한다.
				    table.find('tbody').append(tr);
				});
				
				
				$("#boardlist").html(table); // <div id="boardlist"><table></table></div>
			
			},
			error:function(){
				alert("통신실패");
			}
		});
	}
	//글추가 폼 이동
	
	//글추가하기
	
	//글 상세조회
	
	//글 수정폼이동
	
	//글 수정하기 
	
	//글 삭제하기
</script>
<style type="text/css">

</style>
</head>
<body>
<div layout:fragment="content">
	<div id="container">
		<div id="boardlist"></div>
	</div>
</div>
</body>
</html>






